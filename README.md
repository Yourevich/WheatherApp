# WeatherApp iOS

## Описание приложения
Простое iOS-приложение, которое отображает на одном экране:
1. **Текущую погоду** (город, локальное время, температура, “ощущается как”, иконка, текстовое описание).  
2. **Почасовой прогноз** — оставшиеся часы текущего дня и все 24 часа следующего дня, в горизонтально скроллящейся секции.  
3. **Трёхдневный прогноз** — сегодня, завтра и послезавтра.  
4. **Геолокация** — при старте запрашиваем разрешение; если разрешено, показываем погоду по координатам пользователя, если отказано — прогноз Москвы.

Приложение написано на Swift с использованием UIKit, полностью программно без Storyboard.

## Соответствие ТЗ

| Требование                                                                 | Реализация                                                                                                                         |
|-----------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------|
| iOS-приложение на Swift + UIKit, без Storyboard                             | Все экраны и ячейки созданы программно: `UIViewController`, `UICollectionViewCompositionalLayout`, кастомные `UICollectionViewCell`. |
| Получение геопозиции                                                         | Запрос `CLLocationManager`; при разрешении используем координаты пользователя, при отказе — координаты Москвы (55.7558,37.6173).      |
| Один экран с погодной информацией                                           | Экран состоит из трёх секций: `.current`, `.hourly`, `.daily`.                                                                    |
| Текущая погода                                                              | Выводим имя города, локальное время, температуру (`temp_c`), “ощущается как” (`feelslike_c`), иконку и описание условия.           |
| Почасовой прогноз                                                           | Секция `.hourly` показывает остаток текущего дня и весь следующий день, прокручивается горизонтально.                              |
| Прогноз на 3 дня                                                            | Секция `.daily` показывает ровно три дня: сегодня, завтра и послезавтра.                                                           |
| Показ загрузки и обработка ошибок                                           | `UIActivityIndicatorView` при загрузке; при ошибке сети или API — `UIAlertController` с кнопкой «Повторить», вызывающей retry.      |
| Dependency Injection для тестов                                             | Все зависимости (Service, ViewModel) инжектируются по протоколам, чтобы легко подставлять моки в юнит-тестах.                      |

## Dependency Injection
- **ViewModel** инжектится в `WeatherViewController` через протокол `WeatherViewModelProtocol`.  
- **Service** инжектится в `WeatherViewModel` через протокол `WeatherServiceProtocol`.  
- Это позволяет в тестах подставлять моки и проверять логику без реального API и CoreLocation.

## Как протестировать

1. **Обычный запуск**  
   - Открыть проект в Xcode 14+ и запустить на симуляторе или устройстве (iOS 15+).  
   - При первом запуске разрешить доступ к геолокации.  
   - Должны появиться текущая погода, почасовой и трёхдневный прогноз.

2. **Обработка отказа в геодоступе**  
   - Запустить приложение → отказаться в сборе гео-данных.
   - Появится прогноз для Москвы (55.7558, 37.6173).

3. **Обработка отсутствия сети**  
   - Отключить интернет
   - Запустить приложение → разрешить или отказаться во всплывающем диалоге геодоступа.  
   - Появится алерт «Интернет недоступен…» с кнопкой «Повторить».  
   - Нажатие «Повторить» при выключенном интернете → алерт снова; при включённом → данные загружаются.

---

